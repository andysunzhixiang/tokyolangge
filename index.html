<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">    
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8">
<link rel="stylesheet" href="css/lib.css" />
<link rel="stylesheet" href="css/index.css" /> 
<link rel="stylesheet" href="css/swiper.min.css" /> 
<title>首页</title>
</head>
<body>
<div class="logo_box">
	<img src="img/logo.png">
</div>
<div class="main_box">
	<div class="img_box" id="img_box">
		<i></i>
	</div>
	<div id="nav_list">
		<div class="swiper-container" >
			<div class="swiper-wrapper" >
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
			</div>
		</div>
	</div>

	<div id="sub_nav">
		<div class="swiper-container" >
			<div class="swiper-wrapper" >
				<div class="swiper-slide">				
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">				
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">				
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">				
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">				
					<li class="row">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>中古买卖平台</span>
							</p>
						</div>
					</li>
				</div>
				<div class="swiper-slide">					
					<li class="row" id="nav_back">
						<i class="icon" >
							<img src="img/icon_0.png">
						</i>
						<div class="info_box">
							<i>
								<img class="arow" src="img/left.png">
							</i>
							<p class="name">
								<span>返回</span>
							</p>
						</div>
					</li>					
				</div>
			</div>
		</div>
	</div>
</div>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="js/swiper.min.js"></script>
<script>
var config = [{
	name:"中古买卖平台",
	img:"img/dome1.jpg",
	icon:"img/icon_0.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_0.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_0.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_0.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_0.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_0.png",
	}]
},{
	name:"不动产・租赁买卖",
	img:"img/dome2.jpg",
	icon:"img/icon_1.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_1.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_1.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_1.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_1.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_1.png",
	}]
},{
	name:"留学・中日短签",
	img:"img/dome3.jpg",
	icon:"img/icon_2.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_2.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_2.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_2.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_2.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_2.png",
	}]
},{
	name:"搬家",
	img:"img/dome4.jpg",
	icon:"img/icon_3.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_3.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_3.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_3.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_3.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_3.png",
	}]
},{
	name:"一路向东",
	img:"img/dome1.jpg",
	icon:"img/icon_4.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_4.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_4.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_4.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_4.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_4.png",
	}]
},{
	name:"导游·民宿",
	img:"img/dome2.jpg",
	icon:"img/icon_5.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_5.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_5.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_5.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_5.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_5.png",
	}]
},{
	name:"汇率查询",
	img:"img/dome3.jpg",
	icon:"img/icon_6.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_6.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_6.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_6.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_6.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_6.png",
	}]
},{
	name:"法律咨询",
	img:"img/dome4.jpg",
	icon:"img/icon_7.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_7.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_7.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_7.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_7.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_7.png",
	}]
},{
	name:"日本代购",
	img:"img/dome1.jpg",
	icon:"img/icon_8.png",
	data:[{
		name:"子菜单业务1",
		url:"https://www.baidu.com/",
		icon:"img/icon_8.png",
	},{
		name:"子菜单业务2",
		url:"https://www.baidu.com/",
		icon:"img/icon_8.png",
	},{
		name:"子菜单业务3",
		url:"https://www.baidu.com/",
		icon:"img/icon_8.png",
	},{
		name:"子菜单业务4",
		url:"https://www.baidu.com/",
		icon:"img/icon_8.png",
	},{
		name:"子菜单业务5",
		url:"https://www.baidu.com/",
		icon:"img/icon_8.png",
	}]
}];
var isPhone = false;
var mySwiper = null;
var subSwiper = null;
var isShowSub = false;

function playSwiper(num){
	mySwiper = new Swiper('#nav_list .swiper-container', {
		direction: 'vertical',
		slidesPerView: num,
		spaceBetween: 15,
		loop:true,
	});
};

function playSubSwiper(num){
	subSwiper = new Swiper('#sub_nav .swiper-container', {
		direction: 'vertical',
		slidesPerView: num,
		spaceBetween: 15,
	});
};

function changeUrlImg(){
	for(var i = 0;i<config.length;i++){
		var msg = config[i];
		if(msg.name != undefined){
			var node = $("#nav_list").find(".swiper-slide").eq(i);	
			if(i == 0){
				changeImg(i);
			};
			node.find(".icon img").attr("src",msg.icon);
			node.find(".name span").text(msg.name);
		}
	}
};

function changeImg(idx){
	$("#img_box i").css("background-image","url("+config[idx].img+")")
};

function navHover(){
	$("#nav_list").on("mouseenter",".swiper-slide",function(){
		if(!isPhone){
			$(this).addClass("active")
			$(this).siblings().removeClass("active");
			var idx = $(this).attr("data-swiper-slide-index");
			changeImg(idx)
		}	
	});
};

function jumpHref(){
	$("#sub_nav").on("click",".swiper-slide li",function(){
		var url =$(this).attr("url");
		if(url != undefined){
			window.open(url)
		}
	});
};

function navClick(){
	$("#nav_list").on("click",".swiper-slide",function(){
		isShowSub = true;
		var idx = $(this).attr("data-swiper-slide-index");		
		var msg = config[idx].data;
		for(var i = 0;i<msg.length;i++){
			$("#sub_nav li").eq(i).attr("url",msg[i].url);
			$("#sub_nav li").eq(i).find(".info_box .name").text(msg[i].name);
			$("#sub_nav li").eq(i).find(".icon img").attr("src",msg[i].icon);
		};
		$("#nav_list").hide();
		$("#sub_nav").show();
		showSubNav();
		hoverSubNav()
	});

	$("#sub_nav").on("click","#nav_back",function(){
		$("#nav_list").show();
		$("#sub_nav").hide();
		showNavList()
	})
};

function hoverSubNav(){
	if(isPhone){
		$("#sub_nav").off("mouseenter");
	}else{
		$("#sub_nav").on("mouseenter",".swiper-slide",function(){
			$(this).addClass("swiper-slide-active")
			$(this).siblings().removeClass("swiper-slide-active");
		});
	}
};

function changeIdx(){
	$("#nav_list").find(".swiper-slide-next").next().addClass("active");
	$("#nav_list").find(".swiper-slide-next").next().siblings().removeClass("active")
};

function checkIdx(idx){
	$('#nav_list').find(".swiper-slide").eq(idx).addClass("active")
	$('#nav_list').find(".swiper-slide").eq(idx).siblings().removeClass("active")
};

function showNavList(){
	if(mySwiper != null){
		mySwiper.destroy(true,true); 
	};
	if(isPhone){	
			
		checkIdx(2);	
		playSwiper(5);
		if(mySwiper != null){
			mySwiper.allowTouchMove = true;
		};	
		mySwiper.on('slideChangeTransitionEnd', function () {
			changeIdx()
		});
	}else{	
		
		checkIdx(4);
		playSwiper(9);
		if(mySwiper != null){
			mySwiper.allowTouchMove = false;
		};
		mySwiper.off('slideChangeTransitionEnd');
	}
};

function showSubNav(){
	if(subSwiper != null){
		subSwiper.destroy(true,true); 
	};
	if(isPhone){		
		var h = ($("body").height())*0.6;
		$("#sub_nav").css("height",h);	
		playSubSwiper(5);
		if(subSwiper != null){
			subSwiper.allowTouchMove= true;
		};
	}else{
		var h = ($("body").height()-15)/9;
		$("#sub_nav").css("height",h*6+15);	
		playSubSwiper(6);
		if(subSwiper != null){
			subSwiper.allowTouchMove= false;
		};
	}
};

function resizeWindow(){
	$(window).resize(function(){
		if($("body").width()<=720){
			if(!isPhone){	
				isPhone = true;
				showNavList();
				if(isShowSub){
					showSubNav();
					hoverSubNav()
				};			
			}
		}else{
			if(isPhone){
				isPhone = false;
				showNavList();
				if(isShowSub){
					showSubNav();
					hoverSubNav()
				}
			}		 
		}
	});
};

window.onload = function() {
	changeUrlImg();
	if($("body").width()<=720){
		isPhone = true;
		showNavList()
	}else{
		isPhone = false;
		showNavList();
		navHover();	
	};
	resizeWindow()
	navClick();	
	jumpHref();
};

</script>
</body>
</html>
